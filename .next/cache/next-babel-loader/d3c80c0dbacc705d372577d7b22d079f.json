{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useEffect, useState } from \"react\";\nimport { useRouter } from \"next/router\";\nimport { useDispatch } from \"react-redux\";\nimport { Typography, Row, Col } from \"antd\";\nimport { useSelector } from \"react-redux\";\nvar Text = Typography.Text;\nimport { ADD_URL } from \"../reducers/answer\";\nimport db from \"../back/firestore\";\nimport storage from \"../back/cloudStorage\";\nimport { v4 as uuid } from \"uuid\";\nimport calculator from \"../back/calculator\";\nimport result from \"../assets/result.json\";\n\nvar Loading = function Loading() {\n  var router = useRouter();\n  var dispatch = useDispatch();\n\n  var _useSelector = useSelector(function (state) {\n    return state.answer;\n  }),\n      ans = _useSelector.ans;\n\n  var _useState = useState(null),\n      screenshotUrl = _useState[0],\n      setScreenshotUrl = _useState[1];\n\n  var _useState2 = useState(null),\n      thumbUrl = _useState2[0],\n      setThumbUrl = _useState2[1];\n\n  var _useState3 = useState(null),\n      goodUrl = _useState3[0],\n      setGoodUrl = _useState3[1];\n\n  var _useState4 = useState(null),\n      badUrl = _useState4[0],\n      setBadUrl = _useState4[1];\n\n  useEffect(function () {\n    if (ans) {\n      var now = new Date();\n      var uid = uuid();\n      var userObj = {\n        answer: ans,\n        type: calculator(ans),\n        created_at: now,\n        updated_at: now\n      };\n      db.collection(\"results\").doc(uid).set(userObj).then(function (res) {})[\"catch\"](function (error) {\n        alert(\"error: \" + error.message);\n        console.log(error);\n      });\n      var v = result[ans];\n      storage.ref().child(v[\"screenshot\"]).getDownloadURL().then(function (url) {\n        setScreenshotUrl(url);\n      })[\"catch\"](function (err) {\n        return;\n      });\n      storage.ref().child(v[\"thumbnail\"]).getDownloadURL().then(function (url) {\n        setThumbUrl(url);\n      })[\"catch\"](function (err) {\n        return;\n      });\n      storage.ref().child(v[\"good_image\"]).getDownloadURL().then(function (url) {\n        setGoodUrl(url);\n      })[\"catch\"](function (err) {\n        return;\n      });\n      storage.ref().child(v[\"bad_image\"]).getDownloadURL().then(function (url) {\n        setBadUrl(url);\n      })[\"catch\"](function (err) {\n        return;\n      });\n      dispatch({\n        type: ADD_ANSWER,\n        data: {\n          screenshotUrl: screenshotUrl,\n          thumbUrl: thumbUrl,\n          goodUrl: goodUrl,\n          badUrl: badUrl\n        }\n      });\n      router.push(\"/result/\".concat(calculator(ans)));\n    } else {\n      router.push(\"/result/\".concat(calculator([])));\n    }\n  }, [ans]);\n  return __jsx(React.Fragment, null, __jsx(Row, {\n    justify: \"space-around\"\n  }, __jsx(Col, {\n    xs: 16,\n    sm: 14,\n    md: 10,\n    lg: 8,\n    xl: 8\n  }, __jsx(\"img\", {\n    src: require(\"../assets/images/v_curious.gif\"),\n    alt: \"\",\n    style: {\n      width: \"100%\",\n      marginTop: \"100px\"\n    }\n  }))), __jsx(Row, {\n    justify: \"center\"\n  }, __jsx(Col, {\n    xs: 16,\n    sm: 14,\n    md: 10,\n    lg: 8,\n    xl: 8\n  }, __jsx(Text, {\n    style: {\n      textAlign: \"center\",\n      display: \"block\",\n      marginTop: \"30px\",\n      fontSize: \"20px\"\n    }\n  }, \"\\uBD84\\uC11D\\uC911..\"))));\n};\n\nexport default Loading;","map":null,"metadata":{},"sourceType":"module"}